<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>手捧夕阳~blog</title>
  
  <subtitle>To be your well-know joy.</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-11-18T15:05:50.224Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>手捧夕阳</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>linux-ten-monitor-tools</title>
    <link href="http://example.com/2022/11/18/linux-ten-monitor-tools/"/>
    <id>http://example.com/2022/11/18/linux-ten-monitor-tools/</id>
    <published>2022-11-18T14:59:57.000Z</published>
    <updated>2022-11-18T15:05:50.224Z</updated>
    
    <content type="html"><![CDATA[<h1 id="每个系统管理员应该知道的10个监控工具"><a href="#每个系统管理员应该知道的10个监控工具" class="headerlink" title="每个系统管理员应该知道的10个监控工具"></a>每个系统管理员应该知道的10个监控工具</h1><p>10 Linux System Monitoring Tools Every SysAdmin Should Know</p><hr><h1 id="这是一篇关于检测工具该如何使用的文章"><a href="#这是一篇关于检测工具该如何使用的文章" class="headerlink" title="这是一篇关于检测工具该如何使用的文章"></a>这是一篇关于检测工具该如何使用的文章</h1><h2 id="welcome-to-my-blog-This-is-an-article-about-how-monitoring-tools-should-be-used"><a href="#welcome-to-my-blog-This-is-an-article-about-how-monitoring-tools-should-be-used" class="headerlink" title="welcome to my blog. This is an article about how monitoring tools should be used."></a>welcome to my blog. This is an article about how monitoring tools should be used.</h2><p><img src="https://img0.baidu.com/it/u=3913065987,310108978&fm=253&fmt=auto&app=138&f=JPEG?w=890&h=500" width="50%"></br><br>可莉会监督你好好学习<br></br>适用于但不仅限于这些系统   [没写那么多其实是因为懒 <del>_</del>]</p><table><thead><tr><th align="center">ID</th><th align="center">sysctem</th></tr></thead><tbody><tr><td align="center">1</td><td align="center">Centos</td></tr><tr><td align="center">2</td><td align="center">Debian</td></tr><tr><td align="center">3</td><td align="center">Ubuntu</td></tr><tr><td align="center">…</td><td align="center">…</td></tr></tbody></table><hr><h1 id="1-如何查看活动进程呢？"><a href="#1-如何查看活动进程呢？" class="headerlink" title="1 如何查看活动进程呢？"></a>1 如何查看活动进程呢？</h1><h2 id="top-进程活动监视命令"><a href="#top-进程活动监视命令" class="headerlink" title="top - 进程活动监视命令"></a>top - 进程活动监视命令</h2><p>Process activity monitoring command</p><p>top命令显示Linux进程信息。它提供了运行系统的动态实时视图，即实际的流程活动。默认情况下，它显示服务器上运行的cpu密集型任务最多的任务，并每5秒更新一次列表,还可以键入enter进行查看，键入Ctrl + C 进行关闭。<br></br>如下图<br></br><br><img src="https://www.cyberciti.biz/tips/wp-content/uploads/2009/06/top-Linux-monitoring-command.jpg"></br></p><h3 id="常用的top命令及其需要添加的参数"><a href="#常用的top命令及其需要添加的参数" class="headerlink" title="常用的top命令及其需要添加的参数"></a>常用的top命令及其需要添加的参数</h3><p>参考下表</p><table><thead><tr><th align="center">Key</th><th align="center">Usage</th></tr></thead><tbody><tr><td align="center">t</td><td align="center">关闭和打开显示摘要信息</td></tr><tr><td align="center">m</td><td align="center">关闭和打开显示内存信息</td></tr><tr><td align="center">A</td><td align="center">根据各种系统资源的顶级使用者对显示进行排序。用于快速识别系统上需要性能的任务</td></tr><tr><td align="center">f</td><td align="center">进入top的交互式配置屏幕。有助于为特定的任务设置顶部</td></tr><tr><td align="center">o</td><td align="center">使您能够以交互方式选择top中的顺序</td></tr><tr><td align="center">r</td><td align="center">发出renice命令[renice:重新指定一个或多个进程的优先级]</td></tr><tr><td align="center">k</td><td align="center">发出kill命令</td></tr><tr><td align="center">z</td><td align="center">打开或关闭颜色&#x2F;单色</td></tr></tbody></table><hr><h1 id="2-Linux如何查找CPU利用率？"><a href="#2-Linux如何查找CPU利用率？" class="headerlink" title="2 Linux如何查找CPU利用率？"></a>2 Linux如何查找CPU利用率？</h1><p>How do I Find Out Linux CPU Utilization?</p><h2 id="vmstat-命令报告有关进程、内存、分页、块IO、trap和cpu活动的信息"><a href="#vmstat-命令报告有关进程、内存、分页、块IO、trap和cpu活动的信息" class="headerlink" title="vmstat 命令报告有关进程、内存、分页、块IO、trap和cpu活动的信息"></a>vmstat 命令报告有关进程、内存、分页、块IO、trap和cpu活动的信息</h2><p>The vmstat command reports information about processes, memory, paging, block IO, traps, and cpu activity.<br>vmstat - 虚拟内存统计信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># vmstat 3</span><br></pre></td></tr></table></figure><p>参考下图</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------</span><br><span class="line"> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st</span><br><span class="line"> 0  0      0 2540988 522188 5130400    0    0     2    32    4    2  4  1 96  0  0</span><br><span class="line"> 1  0      0 2540988 522188 5130400    0    0     0   720 1199  665  1  0 99  0  0</span><br><span class="line"> 0  0      0 2540956 522188 5130400    0    0     0     0 1151 1569  4  1 95  0  0</span><br><span class="line"> 0  0      0 2540956 522188 5130500    0    0     0     6 1117  439  1  0 99  0  0</span><br><span class="line"> 0  0      0 2540940 522188 5130512    0    0     0   536 1189  932  1  0 98  0  0</span><br><span class="line"> 0  0      0 2538444 522188 5130588    0    0     0     0 1187 1417  4  1 96  0  0</span><br><span class="line"> 0  0      0 2490060 522188 5130640    0    0     0    18 1253 1123  5  1 94  0  0</span><br></pre></td></tr></table></figure><h3 id="显示内存利用率Slabinfo"><a href="#显示内存利用率Slabinfo" class="headerlink" title="显示内存利用率Slabinfo"></a>显示内存利用率Slabinfo</h3><p>Display Memory Utilization Slabinfo</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat -m</span><br></pre></td></tr></table></figure><h3 id="获取有关活动-x2F-非活动内存页的信息"><a href="#获取有关活动-x2F-非活动内存页的信息" class="headerlink" title="获取有关活动&#x2F;非活动内存页的信息"></a>获取有关活动&#x2F;非活动内存页的信息</h3><p>Get Information About Active &#x2F; Inactive Memory Pages</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat -a</span><br></pre></td></tr></table></figure><h4 id="如何查找Linux资源利用率以检测系统瓶颈"><a href="#如何查找Linux资源利用率以检测系统瓶颈" class="headerlink" title="如何查找Linux资源利用率以检测系统瓶颈?"></a>如何查找Linux资源利用率以检测系统瓶颈?</h4><h4 id="Linux查找哪些进程正在使用交换空间"><a href="#Linux查找哪些进程正在使用交换空间" class="headerlink" title="Linux查找哪些进程正在使用交换空间"></a>Linux查找哪些进程正在使用交换空间</h4><p>可以使用 smem 命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">smem</span><br></pre></td></tr></table></figure><h3 id="另一种选择是将pgrep-command与grep命令结合使用，以查找SWAP-mem的使用情况"><a href="#另一种选择是将pgrep-command与grep命令结合使用，以查找SWAP-mem的使用情况" class="headerlink" title="另一种选择是将pgrep command与grep命令结合使用，以查找SWAP mem的使用情况:"></a>另一种选择是将pgrep command与grep命令结合使用，以查找SWAP mem的使用情况:</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pgrep memcached</span><br><span class="line">grep --color VmSwap /proc/48440/status</span><br></pre></td></tr></table></figure><p><img src="https://www.cyberciti.biz/media/new/faq/2013/01/swapping-command.png"></br><br>Linux查找哪些进程正在使用交换空间</p><hr><h1 id="3-w-查找谁登录了系统以及他们在做什么"><a href="#3-w-查找谁登录了系统以及他们在做什么" class="headerlink" title="3 w - 查找谁登录了系统以及他们在做什么"></a>3 w - 查找谁登录了系统以及他们在做什么</h1><p>We use the w command displays information about the users currently on the machine, and their processes.</p><h4 id="我们可以使用-w-命令显示当前机器上的用户，及其进程信息"><a href="#我们可以使用-w-命令显示当前机器上的用户，及其进程信息" class="headerlink" title="我们可以使用 w 命令显示当前机器上的用户，及其进程信息"></a>我们可以使用 w 命令显示当前机器上的用户，及其进程信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># w username</span><br><span class="line"># w vivek</span><br></pre></td></tr></table></figure><hr><h1 id="4-uptime-告诉我们Linux系统已经运行了多长时间。我们使用uptime命令来查看服务器已经运行了多长时间。当前时间、系统运行了多长时间、当前有多少用户登录，以及过去1分钟、5分钟和15分钟的系统负载平均值。"><a href="#4-uptime-告诉我们Linux系统已经运行了多长时间。我们使用uptime命令来查看服务器已经运行了多长时间。当前时间、系统运行了多长时间、当前有多少用户登录，以及过去1分钟、5分钟和15分钟的系统负载平均值。" class="headerlink" title="4 uptime - 告诉我们Linux系统已经运行了多长时间。我们使用uptime命令来查看服务器已经运行了多长时间。当前时间、系统运行了多长时间、当前有多少用户登录，以及过去1分钟、5分钟和15分钟的系统负载平均值。"></a>4 uptime - 告诉我们Linux系统已经运行了多长时间。我们使用uptime命令来查看服务器已经运行了多长时间。当前时间、系统运行了多长时间、当前有多少用户登录，以及过去1分钟、5分钟和15分钟的系统负载平均值。</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># uptime</span><br></pre></td></tr></table></figure><hr><h1 id="5-ps-显示Linux进程使用ps命令报告Linux下当前进程的快照。要选择所有的进程，通过下面的-A或-e选项"><a href="#5-ps-显示Linux进程使用ps命令报告Linux下当前进程的快照。要选择所有的进程，通过下面的-A或-e选项" class="headerlink" title="5 ps -显示Linux进程使用ps命令报告Linux下当前进程的快照。要选择所有的进程，通过下面的-A或-e选项"></a>5 ps -显示Linux进程使用ps命令报告Linux下当前进程的快照。要选择所有的进程，通过下面的-A或-e选项</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ps -A</span><br></pre></td></tr></table></figure><img src="https://wx2.sinaimg.cn/mw2000/0033ImPzly1h86nc44c04j61400u00y502.jpg"><p>命令操作图如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> PID TTY          TIME CMD</span><br><span class="line">    1 ?        00:00:02 init</span><br><span class="line">    2 ?        00:00:02 migration/0</span><br><span class="line">    3 ?        00:00:01 ksoftirqd/0</span><br><span class="line">    4 ?        00:00:00 watchdog/0</span><br><span class="line">    5 ?        00:00:00 migration/1</span><br><span class="line">    6 ?        00:00:15 ksoftirqd/1</span><br><span class="line">....</span><br><span class="line">.....</span><br><span class="line"> 4881 ?        00:53:28 java</span><br><span class="line"> 4885 tty1     00:00:00 mingetty</span><br><span class="line"> 4886 tty2     00:00:00 mingetty</span><br><span class="line"> 4887 tty3     00:00:00 mingetty</span><br><span class="line"> 4888 tty4     00:00:00 mingetty</span><br><span class="line"> 4891 tty5     00:00:00 mingetty</span><br><span class="line"> 4892 tty6     00:00:00 mingetty</span><br><span class="line"> 4893 ttyS1    00:00:00 agetty</span><br><span class="line">12853 ?        00:00:00 cifsoplockd</span><br><span class="line">12854 ?        00:00:00 cifsdnotifyd</span><br><span class="line">14231 ?        00:10:34 lighttpd</span><br><span class="line">14232 ?        00:00:00 php-cgi</span><br><span class="line">54981 pts/0    00:00:00 vim</span><br><span class="line">55465 ?        00:00:00 php-cgi</span><br><span class="line">55546 ?        00:00:00 bind9-snmp-stat</span><br><span class="line">55704 pts/1    00:00:00 ps</span><br></pre></td></tr></table></figure><h5 id="注意，ps命令就像top命令，可以提供多种信息，但是需要添加参数。"><a href="#注意，ps命令就像top命令，可以提供多种信息，但是需要添加参数。" class="headerlink" title="注意，ps命令就像top命令，可以提供多种信息，但是需要添加参数。"></a>注意，ps命令就像top命令，可以提供多种信息，但是需要添加参数。</h5><p>命令示范：</p><p>显示长格式输出</br><br>Show Long Format Output</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ps -Al</span><br></pre></td></tr></table></figure><p>要打开完整模式(它将显示传递给进程的命令行参数):</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ps -Alf</span><br></pre></td></tr></table></figure><p>显示线程(LWP和NLWP)</br><br>#LWP 用户级线程和内核级线程之间的中间层   #NLWP 轻量线程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ps -AlFH</span><br></pre></td></tr></table></figure><p>监视进程后的线程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ps -AlLm</span><br></pre></td></tr></table></figure><p>打印服务器上的所有进程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps ax</span><br><span class="line"># ps axi</span><br></pre></td></tr></table></figure><p>打印进程树</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ps -ejH</span><br><span class="line"># ps axjf</span><br><span class="line"># pstree</span><br></pre></td></tr></table></figure><p>获取Linux进程的安全信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ps -eo euser,ruser,suser,fuser,f,comm,label</span><br><span class="line"># ps axZ</span><br><span class="line"># ps -eM</span><br></pre></td></tr></table></figure><p>让我们打印每个以Vivek用户运行的进程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -U vivek -u vivek u</span><br></pre></td></tr></table></figure><p>配置ps自定义格式的命令输出信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ps -eo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,comm</span><br><span class="line"># ps axo stat,euid,ruid,tty,tpgid,sess,pgrp,ppid,pid,pcpu,comm</span><br><span class="line"># ps -eopid,tt,user,fname,tmout,f,wchan</span><br></pre></td></tr></table></figure><p>只显示httpd的进程号</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># ps -C lighttpd -o pid=</span><br><span class="line"></span><br><span class="line">$ or</span><br><span class="line"></span><br><span class="line"># pgrep -u vivek php-cgi</span><br></pre></td></tr></table></figure><p>打印进程55977的名称</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ps -p 55977 -o comm=</span><br></pre></td></tr></table></figure><p>显示前10个内存消耗进程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ps -auxf | sort -nr -k 4 | head -10</span><br></pre></td></tr></table></figure><p>显示前10个CPU消耗进程</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ps -auxf | sort -nr -k 3 | head -10</span><br></pre></td></tr></table></figure><hr><h1 id="6-free-显示Linux服务器内存使用情况"><a href="#6-free-显示Linux服务器内存使用情况" class="headerlink" title="6 free -显示Linux服务器内存使用情况"></a>6 free -显示Linux服务器内存使用情况</h1><p>free命令显示系统中空闲和使用的物理和交换内存的总量，以及内核使用的缓冲区</br><br>The free command shows the total amount of free and used physical and swap memory in the system, as well as the buffers used by the kernel.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># free</span><br></pre></td></tr></table></figure><p>服务器示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">            total       used       free     shared    buffers     cached</span><br><span class="line">Mem:      12302896    9739664    2563232          0     523124    5154740</span><br><span class="line">-/+ buffers/cache:    4061800    8241096</span><br><span class="line">Swap:      1052248          0    1052248</span><br></pre></td></tr></table></figure><hr><h1 id="7-iostat—监视Linux平均CPU负载和磁盘活动"><a href="#7-iostat—监视Linux平均CPU负载和磁盘活动" class="headerlink" title="7 iostat—监视Linux平均CPU负载和磁盘活动"></a>7 iostat—监视Linux平均CPU负载和磁盘活动</h1><p>我们使用iostat命令报告Linux操作系统下的设备、分区和网络文件系统(NFS)的中央处理单元(CPU)统计数据和输入&#x2F;输出统计数据。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iostat</span><br></pre></td></tr></table></figure><p>服务器示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Linux 2.6.18-128.1.14.el5 (www03.nixcraft.in) 06/26/2009</span><br><span class="line"></span><br><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">           3.50    0.09    0.51    0.03    0.00   95.86</span><br><span class="line"></span><br><span class="line">Device:            tps   Blk_read/s   Blk_wrtn/s   Blk_read   Blk_wrtn</span><br><span class="line">sda              22.04        31.88       512.03   16193351  260102868</span><br><span class="line">sda1              0.00         0.00         0.00       2166        180</span><br><span class="line">sda2             22.04        31.87       512.03   16189010  260102688</span><br><span class="line">sda3              0.00         0.00         0.00       1615          0</span><br></pre></td></tr></table></figure><p>8 sar -命令收集和报告Linux系统活动<br>sar 命令用于收集、上报和保存系统活动信息。要查看网络日志，输入:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sar -n DEV | more</span><br></pre></td></tr></table></figure><p>查看24日起日志:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sar -n DEV -f /var/log/sa/sa24 | more</span><br></pre></td></tr></table></figure><p>你也可以使用sar显示实时使用情况:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sar 4 5</span><br></pre></td></tr></table></figure><p>服务器示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Linux 2.6.18-128.1.14.el5 (www03.nixcraft.in) 06/26/2022</span><br><span class="line"></span><br><span class="line">06:45:12 PM       CPU     %user     %nice   %system   %iowait    %steal     %idle</span><br><span class="line">06:45:16 PM       all      2.00      0.00      0.22      0.00      0.00     97.78</span><br><span class="line">06:45:20 PM       all      2.07      0.00      0.38      0.03      0.00     97.52</span><br><span class="line">06:45:24 PM       all      0.94      0.00      0.28      0.00      0.00     98.78</span><br><span class="line">06:45:28 PM       all      1.56      0.00      0.22      0.00      0.00     98.22</span><br><span class="line">06:45:32 PM       all      3.53      0.00      0.25      0.03      0.00     96.19</span><br><span class="line">Average:          all      2.02      0.00      0.27      0.01      0.00     97.70</span><br></pre></td></tr></table></figure><hr><h1 id="9-mpstat-监视Linux上的多处理器使用情况"><a href="#9-mpstat-监视Linux上的多处理器使用情况" class="headerlink" title="9 mpstat -监视Linux上的多处理器使用情况"></a>9 mpstat -监视Linux上的多处理器使用情况</h1><p>Mpstat命令显示每个可用处理器的活动，处理器0是第一个。mpstat -P ALL显示每个处理器的平均CPU利用率:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mpstat -P ALL`</span><br></pre></td></tr></table></figure><p>服务器示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Linux 2.6.18-128.1.14.el5 (www03.nixcraft.in) 06/26/2022</span><br><span class="line"></span><br><span class="line">06:48:11 PM  CPU   %user   %nice    %sys %iowait    %irq   %soft  %steal   %idle    intr/s</span><br><span class="line">06:48:11 PM  all    3.50    0.09    0.34    0.03    0.01    0.17    0.00   95.86   1218.04</span><br><span class="line">06:48:11 PM    0    3.44    0.08    0.31    0.02    0.00    0.12    0.00   96.04   1000.31</span><br><span class="line">06:48:11 PM    1    3.10    0.08    0.32    0.09    0.02    0.11    0.00   96.28     34.93</span><br><span class="line">06:48:11 PM    2    4.16    0.11    0.36    0.02    0.00    0.11    0.00   95.25      0.00</span><br><span class="line">06:48:11 PM    3    3.77    0.11    0.38    0.03    0.01    0.24    0.00   95.46     44.80</span><br><span class="line">06:48:11 PM    4    2.96    0.07    0.29    0.04    0.02    0.10    0.00   96.52     25.91</span><br><span class="line">06:48:11 PM    5    3.26    0.08    0.28    0.03    0.01    0.10    0.00   96.23     14.98</span><br><span class="line">06:48:11 PM    6    4.00    0.10    0.34    0.01    0.00    0.13    0.00   95.42      3.75</span><br><span class="line">06:48:11 PM    7    3.30    0.11    0.39    0.03    0.01    0.46    0.00   95.69     76.89</span><br></pre></td></tr></table></figure><h1 id="10-pmap—监视Linux上的进程内存使用情况"><a href="#10-pmap—监视Linux上的进程内存使用情况" class="headerlink" title="10 pmap—监视Linux上的进程内存使用情况"></a>10 pmap—监视Linux上的进程内存使用情况</h1><p>Pmap命令报告进程的内存映射。使用此命令查找内存瓶颈的原因。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmap -d PID  </span><br></pre></td></tr></table></figure><p>要显示pid 47394的进程内存信息，输入:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pmap -d 47394</span><br></pre></td></tr></table></figure><p>服务器示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">47394:   /usr/bin/php-cgi</span><br><span class="line">Address           Kbytes Mode  Offset           Device    Mapping</span><br><span class="line">0000000000400000    2584 r-x-- 0000000000000000 008:00002 php-cgi</span><br><span class="line">0000000000886000     140 rw--- 0000000000286000 008:00002 php-cgi</span><br><span class="line">00000000008a9000      52 rw--- 00000000008a9000 000:00000   [ anon ]</span><br><span class="line">0000000000aa8000      76 rw--- 00000000002a8000 008:00002 php-cgi</span><br><span class="line">000000000f678000    1980 rw--- 000000000f678000 000:00000   [ anon ]</span><br><span class="line">000000314a600000     112 r-x-- 0000000000000000 008:00002 ld-2.5.so</span><br><span class="line">000000314a81b000       4 r---- 000000000001b000 008:00002 ld-2.5.so</span><br><span class="line">000000314a81c000       4 rw--- 000000000001c000 008:00002 ld-2.5.so</span><br><span class="line">000000314aa00000    1328 r-x-- 0000000000000000 008:00002 libc-2.5.so</span><br><span class="line">000000314ab4c000    2048 ----- 000000000014c000 008:00002 libc-2.5.so</span><br><span class="line">.....</span><br><span class="line">......</span><br><span class="line">..</span><br><span class="line">00002af8d48fd000       4 rw--- 0000000000006000 008:00002 xsl.so</span><br><span class="line">00002af8d490c000      40 r-x-- 0000000000000000 008:00002 libnss_files-2.5.so</span><br><span class="line">00002af8d4916000    2044 ----- 000000000000a000 008:00002 libnss_files-2.5.so</span><br><span class="line">00002af8d4b15000       4 r---- 0000000000009000 008:00002 libnss_files-2.5.so</span><br><span class="line">00002af8d4b16000       4 rw--- 000000000000a000 008:00002 libnss_files-2.5.so</span><br><span class="line">00002af8d4b17000  768000 rw-s- 0000000000000000 000:00009 zero (deleted)</span><br><span class="line">00007fffc95fe000      84 rw--- 00007ffffffea000 000:00000   [ stack ]</span><br><span class="line">ffffffffff600000    8192 ----- 0000000000000000 000:00000   [ anon ]</span><br><span class="line">mapped: 933712K    writeable/private: 4304K    shared: 768000K</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;每个系统管理员应该知道的10个监控工具&quot;&gt;&lt;a href=&quot;#每个系统管理员应该知道的10个监控工具&quot; class=&quot;headerlink&quot; title=&quot;每个系统管理员应该知道的10个监控工具&quot;&gt;&lt;/a&gt;每个系统管理员应该知道的10个监控工具&lt;/h1&gt;&lt;p&gt;10</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>about-SSH</title>
    <link href="http://example.com/2022/10/11/about-centos-SSH/"/>
    <id>http://example.com/2022/10/11/about-centos-SSH/</id>
    <published>2022-10-11T11:16:15.000Z</published>
    <updated>2022-10-12T09:16:09.943Z</updated>
    
    <content type="html"><![CDATA[<h1 id="about-CentOS-SSH"><a href="#about-CentOS-SSH" class="headerlink" title="about CentOS SSH"></a>about CentOS SSH</h1><p>#关于CentOS系统的SSH服务 </p><h2 id="Modify-Remote-Port"><a href="#Modify-Remote-Port" class="headerlink" title="Modify Remote Port"></a>Modify Remote Port</h2><h2 id="修改远程端口"><a href="#修改远程端口" class="headerlink" title="修改远程端口"></a>修改远程端口</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line">#port=22</span><br><span class="line">port=xxx  #修改为要求的端口号</span><br></pre></td></tr></table></figure><h2 id="Permit-Port"><a href="#Permit-Port" class="headerlink" title="Permit Port"></a>Permit Port</h2><h2 id="放行端口"><a href="#放行端口" class="headerlink" title="放行端口"></a>放行端口</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-port=xxx/tcp  #放行修改的端口</span><br><span class="line">firewall-cmd --permanent --remove-port=xxx/tcp  #移除放行端口</span><br><span class="line">firewall-cmd --reload   #重启防火墙</span><br><span class="line">systemctl restart firewalld.service  #重启防火墙</span><br><span class="line">firewall-cmd --list-ports   #查看防火墙当前放行的端口</span><br><span class="line">firewall-cmd --status   #查看防火墙当前状态</span><br><span class="line">systemctl disable firewalld  #永久关闭防火墙</span><br></pre></td></tr></table></figure><h2 id="Install-SSH"><a href="#Install-SSH" class="headerlink" title="Install SSH"></a>Install SSH</h2><h2 id="安装SSH服务"><a href="#安装SSH服务" class="headerlink" title="安装SSH服务"></a>安装SSH服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install openshh-server</span><br></pre></td></tr></table></figure><h1 id="about-Ubuntu-SSH"><a href="#about-Ubuntu-SSH" class="headerlink" title="about Ubuntu SSH"></a>about Ubuntu SSH</h1><h1 id="关于Ubuntu系统的SSH服务"><a href="#关于Ubuntu系统的SSH服务" class="headerlink" title="关于Ubuntu系统的SSH服务"></a>关于Ubuntu系统的SSH服务</h1><h1 id="debian系统与Ubuntu系统类似"><a href="#debian系统与Ubuntu系统类似" class="headerlink" title="debian系统与Ubuntu系统类似"></a>debian系统与Ubuntu系统类似</h1><h2 id="Midify-Remote-Port"><a href="#Midify-Remote-Port" class="headerlink" title="Midify Remote Port"></a>Midify Remote Port</h2><h2 id="修改远程端口-1"><a href="#修改远程端口-1" class="headerlink" title="修改远程端口"></a>修改远程端口</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line">#port=22</span><br><span class="line">port=xxx   #修改成要求的端口</span><br></pre></td></tr></table></figure><h2 id="重启sshd服务"><a href="#重启sshd服务" class="headerlink" title="重启sshd服务"></a>重启sshd服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd</span><br></pre></td></tr></table></figure><h2 id="允许root用户远程"><a href="#允许root用户远程" class="headerlink" title="允许root用户远程"></a>允许root用户远程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line"></span><br><span class="line">修改其中的参数PermitRootLogin no修改为 PermitRootLogin yes</span><br></pre></td></tr></table></figure><h2 id="重启远程服务"><a href="#重启远程服务" class="headerlink" title="重启远程服务"></a>重启远程服务</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart ssh</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;about-CentOS-SSH&quot;&gt;&lt;a href=&quot;#about-CentOS-SSH&quot; class=&quot;headerlink&quot; title=&quot;about CentOS SSH&quot;&gt;&lt;/a&gt;about CentOS SSH&lt;/h1&gt;&lt;p&gt;#关于CentOS系统的SS</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Query-Linux-system-version</title>
    <link href="http://example.com/2022/10/11/Query-system-version/"/>
    <id>http://example.com/2022/10/11/Query-system-version/</id>
    <published>2022-10-11T10:00:46.000Z</published>
    <updated>2022-10-11T10:41:12.788Z</updated>
    
    <content type="html"><![CDATA[<h1 id="welcome-to-my-blog-This-is-an-article-about-how-to-check-the-linux-version-hpoe-that-helps"><a href="#welcome-to-my-blog-This-is-an-article-about-how-to-check-the-linux-version-hpoe-that-helps" class="headerlink" title="welcome to my blog.This is an article about how to check the linux version.hpoe that helps."></a>welcome to my blog.This is an article about how to check the linux version.hpoe that helps.</h1><h1 id="欢迎来到我的博客。这是一篇关于如何查询linux版本的文章-希望对你有所帮助。"><a href="#欢迎来到我的博客。这是一篇关于如何查询linux版本的文章-希望对你有所帮助。" class="headerlink" title="欢迎来到我的博客。这是一篇关于如何查询linux版本的文章,希望对你有所帮助。"></a>欢迎来到我的博客。这是一篇关于如何查询linux版本的文章,希望对你有所帮助。</h1><h2 id="Quit-linux-version"><a href="#Quit-linux-version" class="headerlink" title="Quit linux version"></a>Quit linux version</h2><h2 id="查询linux版本"><a href="#查询linux版本" class="headerlink" title="查询linux版本"></a>查询linux版本</h2><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/redhat-release</span><br></pre></td></tr></table></figure><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat /lsb_release</span><br><span class="line"></span><br><span class="line">$ lsb_release</span><br></pre></td></tr></table></figure><h3 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/issue </span><br></pre></td></tr></table></figure><h3 id="Fedora"><a href="#Fedora" class="headerlink" title="Fedora"></a>Fedora</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;welcome-to-my-blog-This-is-an-article-about-how-to-check-the-linux-version-hpoe-that-helps&quot;&gt;&lt;a href=&quot;#welcome-to-my-blog-This-is-an-</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>about cenntOS Network Card Config</title>
    <link href="http://example.com/2022/10/08/about-centos-netcfg/"/>
    <id>http://example.com/2022/10/08/about-centos-netcfg/</id>
    <published>2022-10-08T07:33:25.232Z</published>
    <updated>2022-10-11T16:01:40.197Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to my blog. This is anartice about the network card configuration of the centos .<br>欢迎来到我的博客。这是一篇关于centos网卡配置的文章。</p><h1 id="Operations-you-must-know"><a href="#Operations-you-must-know" class="headerlink" title="Operations you must know"></a>Operations you must know</h1><h1 id="你必须知道的事情"><a href="#你必须知道的事情" class="headerlink" title="你必须知道的事情"></a>你必须知道的事情</h1><h2 id="How-to-check-the-network-card-name"><a href="#How-to-check-the-network-card-name" class="headerlink" title="How to check the network card name"></a>How to check the network card name</h2><h2 id="如何查看网卡名"><a href="#如何查看网卡名" class="headerlink" title="如何查看网卡名"></a>如何查看网卡名</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ip a</span><br></pre></td></tr></table></figure><h2 id="Open-the-centos-network-card-path"><a href="#Open-the-centos-network-card-path" class="headerlink" title="Open the centos network card path"></a>Open the centos network card path</h2><h2 id="打开centos网卡路径"><a href="#打开centos网卡路径" class="headerlink" title="打开centos网卡路径"></a>打开centos网卡路径</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ /etc/sysconfig/network-scripts/ifcfg-xxx</span><br></pre></td></tr></table></figure><h2 id="Restart-the-network-card"><a href="#Restart-the-network-card" class="headerlink" title="Restart the network card"></a>Restart the network card</h2><h2 id="重启网卡"><a href="#重启网卡" class="headerlink" title="重启网卡"></a>重启网卡</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/network resrtart</span><br><span class="line">ifup xxx</span><br></pre></td></tr></table></figure><h2 id="Use-vi-or-nano-editor-to-edit-network-card-configuration-file"><a href="#Use-vi-or-nano-editor-to-edit-network-card-configuration-file" class="headerlink" title="Use vi or nano editor to edit network card configuration file"></a>Use vi or nano editor to edit network card configuration file</h2><p>使用vi或</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-xxx</span><br><span class="line">nano /etc/sysconfig/network-scripts/ifcfg-xxx</span><br><span class="line"><span class="comment">### vi</span></span><br><span class="line">:wq  <span class="comment">#save</span></span><br><span class="line">:q     <span class="comment">#exit</span></span><br><span class="line">:wq!  <span class="comment">#force to wite</span></span><br><span class="line">:q!    <span class="comment">#force to exit</span></span><br><span class="line"><span class="comment">### nano </span></span><br><span class="line">ctrl + o  <span class="comment">#save</span></span><br><span class="line">ctrl + x  <span class="comment">#exit</span></span><br></pre></td></tr></table></figure><h3 id="Format"><a href="#Format" class="headerlink" title="Format"></a>Format</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=static</span><br><span class="line">DEVICE=network card name</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">IPADDR=</span><br><span class="line">NETMASK=</span><br><span class="line">IPADDR2=</span><br><span class="line">NETMASK2=</span><br><span class="line">GATEWAY=</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">DNS2=223.5.5.5</span><br></pre></td></tr></table></figure><p>Thanks for reading. I don’t know if it was helpful.</p><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to my blog. This is anartice about the network card configuration of the centos .&lt;br&gt;欢迎来到我的博客。这是一篇关于centos网卡配置的文章。&lt;/p&gt;
&lt;h1 id=&quot;Op</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>network card config</title>
    <link href="http://example.com/2022/10/06/About-Linux-Network/"/>
    <id>http://example.com/2022/10/06/About-Linux-Network/</id>
    <published>2022-10-06T08:43:05.957Z</published>
    <updated>2022-10-10T18:01:58.933Z</updated>
    
    <content type="html"><![CDATA[<hr><h2 id="title-centos-ubuntu-debian-with-netwoks"><a href="#title-centos-ubuntu-debian-with-netwoks" class="headerlink" title="title:centos ubuntu debian with netwoks"></a>title:centos ubuntu debian with netwoks</h2><h1 id="一、Debian10网卡配置"><a href="#一、Debian10网卡配置" class="headerlink" title="一、Debian10网卡配置"></a>一、Debian10网卡配置</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/network/interfaces</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 多IP配置</span><br><span class="line">auto eno1</span><br><span class="line">iface eno1 inet static</span><br><span class="line">        address 192.168.10.1/24</span><br><span class="line">        gateway 192.168.10.254</span><br><span class="line">        dns-nameservers 8.8.8.8</span><br><span class="line">auto eno1:0</span><br><span class="line">iface eno1:0 inet static</span><br><span class="line">        address 192.168.10.2/24</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="nano使用"><a href="#nano使用" class="headerlink" title="nano使用"></a>nano使用</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ctrl+o   #保存配置</span><br><span class="line">ctrl+x   #退出</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>#debian重启网卡命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart networking</span><br><span class="line">/etc/init.d/networking restart</span><br><span class="line">service networking restart</span><br></pre></td></tr></table></figure><h1 id="二、Debian7-x2F-8-x2F-9网卡配置"><a href="#二、Debian7-x2F-8-x2F-9网卡配置" class="headerlink" title="二、Debian7&#x2F;8&#x2F;9网卡配置"></a>二、Debian7&#x2F;8&#x2F;9网卡配置</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano /etc/network/interface</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">网卡配置多IP</span></span><br><span class="line">```</span><br><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"></span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet static</span><br><span class="line">address 192.168.10.1</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line">gateway 192.168.10.254</span><br><span class="line">dns-nameservers 8.8.8.8</span><br><span class="line">auto eth0:0</span><br><span class="line">address 192.168.10.2</span><br><span class="line">netmask 255.255.255.0</span><br></pre></td></tr></table></figure><p>ctrl+o   #保存配置 + 回车<br>ctrl+x   #退出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#下面三条命令都可以使用</span><br><span class="line">systemctl restart networking</span><br><span class="line">/etc/init.d/networking restart</span><br><span class="line">service networking restart</span><br></pre></td></tr></table></figure><h1 id="三、ubuntu16-x2F-ubuntu17网卡配置"><a href="#三、ubuntu16-x2F-ubuntu17网卡配置" class="headerlink" title="三、ubuntu16&#x2F;ubuntu17网卡配置"></a>三、ubuntu16&#x2F;ubuntu17网卡配置</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi  /etc/network/interfaces</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">auto eno1</span><br><span class="line">iface eno1 inet static</span><br><span class="line">address 10.0.0.0</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line">gateway 10.0.0.254</span><br><span class="line">dns-nameservers 8.8.8.8</span><br><span class="line">auto eno1:0    #第二个IP</span><br><span class="line">iface eno1:0 inet static</span><br><span class="line">address 10.0.0.0</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line">auto eno1:1    #第三个，更多以此类推</span><br><span class="line">iface eno1:1 inet static</span><br><span class="line">address 10.0.0.0</span><br><span class="line">netmask 255.255.255.0</span><br></pre></td></tr></table></figure><p>重启网卡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/networking restart</span><br><span class="line">或指定启动关闭某个网卡命令</span><br><span class="line">ifdown enp0s3    （关闭网卡enp0s3）</span><br><span class="line">ifup   enp0s3    (启动网卡enp0s3)</span><br><span class="line">service network-manager restart </span><br></pre></td></tr></table></figure><h1 id="四、ubuntu18-ubuntu20网卡配置"><a href="#四、ubuntu18-ubuntu20网卡配置" class="headerlink" title="四、ubuntu18-ubuntu20网卡配置"></a>四、ubuntu18-ubuntu20网卡配置</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/netplan/**  ##默认01/00数字开头文件</span><br></pre></td></tr></table></figure><p>此版本对配置文件格式要求严格，错一步就会导致整张网卡报错</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  renderer: networkd</span><br><span class="line">  ethernets:</span><br><span class="line">    eno1:</span><br><span class="line">      addresses: [ 172.25.1.1/24,172.25.1.2/24 ]</span><br><span class="line">      gateway4: 172.25.1.254</span><br><span class="line">      nameservers:</span><br><span class="line">          addresses: [ 8.8.8.8,114.114.114.114 ]</span><br><span class="line">    eno2:</span><br><span class="line">      addresses: [ 192.168.1.1/24 ]</span><br></pre></td></tr></table></figure><p>重启网卡</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">netplan apply</span><br><span class="line"></span><br><span class="line">ifconfig eth0 down</span><br><span class="line"></span><br><span class="line">ifconfig eth0 up #eth0指网卡名</span><br></pre></td></tr></table></figure><h1 id="五、Centos7-x2F-8网卡配置"><a href="#五、Centos7-x2F-8网卡配置" class="headerlink" title="五、Centos7&#x2F;8网卡配置"></a>五、Centos7&#x2F;8网卡配置</h1><p>vi &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-eno1 #(ifcfg-网卡名)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=static</span><br><span class="line">DEVICE=eno1</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=10.10.0.0</span><br><span class="line">Netmask=255.255.255.0</span><br><span class="line">#IPADDR1=10.10.0.1</span><br><span class="line">#Netmask1=255.255.255.0</span><br><span class="line">GATEWAY=10.10.0.254</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">DNS2=114.114.114.114</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#centos7 重启网卡</span><br><span class="line">#命令1</span><br><span class="line">/etc/init.d/network restart</span><br><span class="line">#命令2</span><br><span class="line">systemctl restart network  </span><br><span class="line"></span><br><span class="line">#centos8重启网卡</span><br><span class="line">nmcli connection reload</span><br><span class="line"></span><br><span class="line">#不能立即生效的命令</span><br><span class="line">nmcli d c eno1</span><br><span class="line"></span><br><span class="line">nmcli c r eno1</span><br><span class="line"></span><br><span class="line">nmcli d r eno1</span><br><span class="line"></span><br><span class="line">#一次运行</span><br><span class="line">nmcli d c eno1&amp;&amp;nmcli c r eno1&amp;&amp;nmcli d r eno1 </span><br></pre></td></tr></table></figure><p>重启失败，检查网卡配置文件内容，如无误，centos6建议直接重启，centos7一般是NetworkManager服务限制了，可以关闭服务重试</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop NetworkManager &amp;&amp; systemctl restart network &amp;&amp; sleep 5s &amp;&amp; systemctl start NetworkManager</span><br></pre></td></tr></table></figure><p>NetworkManager服务开启也可以用<code>nmtui</code>命令进入图形界面配置网卡</p><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;hr&gt;
&lt;h2 id=&quot;title-centos-ubuntu-debian-with-netwoks&quot;&gt;&lt;a href=&quot;#title-centos-ubuntu-debian-with-netwoks&quot; class=&quot;headerlink&quot; title=&quot;title:cen</summary>
      
    
    
    
    
  </entry>
  
</feed>
